<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[Always in the direction of the sea!]]></title>
  <subtitle><![CDATA[Stay hungry,stay foolish!]]></subtitle>
  <link href="/atom.xml" rel="self"/>
  <link href="http://wangang.github.io/"/>
  <updated>2014-08-10T04:11:39.915Z</updated>
  <id>http://wangang.github.io/</id>
  
  <author>
    <name><![CDATA[Wan Gang]]></name>
    <email><![CDATA[wangang006@gmail.com]]></email>
  </author>
  
  <generator uri="http://zespia.tw/hexo/">Hexo</generator>
  
  <entry>
    <title><![CDATA[第二周周志]]></title>
    <link href="http://wangang.github.io/2014/08/10/%E7%AC%AC%E4%BA%8C%E5%91%A8%E5%91%A8%E5%BF%97/"/>
    <id>http://wangang.github.io/2014/08/10/第二周周志/</id>
    <published>2014-08-10T03:25:32.000Z</published>
    <updated>2014-08-10T03:35:11.000Z</updated>
    <content type="html"><![CDATA[<ul>
<li>本周学习工作主要是利用VB.net的SerialPort及ZedGraph进行串口数据采集以及实时显示。硬件电路方面采用：单轴角度传感器，arduino，少许杜邦线…单轴角度传感器有三根连接线其中两条电源线，一条输出V_out,arduino用IO口采集角度传感器的输出电压值，采集到的电压根据datasheet里面电压角度换算公式进行运算，然后通过串口将角度值传入PC机。硬件连接：单轴角度传感器VCC、GND分别接入arduino的电源和地，V_out接入analogPin 3 ，完成硬件连接。嵌入式程序如下：</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="preprocessor">#<span class="keyword">include</span>&lt;math&gt;   <span class="comment">//调用数学库，后面要用arcsin</span></span></div><div class="line"><span class="keyword">int</span> readPin = <span class="number">3</span>; <span class="comment">//设置V_out 引脚为analogPin 3</span></div><div class="line"><span class="keyword">int</span> value = <span class="number">0</span>;   <span class="comment">//中间值</span></div><div class="line"><span class="keyword">float</span> V_out = <span class="number">0</span>; <span class="comment">//电压值</span></div><div class="line"><span class="keyword">float</span> angle = <span class="number">0</span>;<span class="comment">//角度值</span></div><div class="line"><span class="keyword">void</span> setup()</div><div class="line">{</div><div class="line">  Serial.begin(<span class="number">19200</span>);<span class="comment">//串口开始，波特率为19200</span></div><div class="line">}</div><div class="line"><span class="keyword">void</span> loop()</div><div class="line">{</div><div class="line">  value = analogRead(readPin);<span class="comment">//得到IO口的数值</span></div><div class="line">  V_out = value*(<span class="number">5.0</span>/<span class="number">1023</span>);<span class="comment">//转化为电压值</span></div><div class="line">  angle = <span class="built_in">asin</span>(<span class="number">0.5</span>*V_out-<span class="number">1.25</span>)*<span class="number">180</span>/PI;<span class="comment">//参照datasheet 电压角度转化公式</span></div><div class="line">  Serial.print (angle);<span class="comment">//串口输出角度</span></div><div class="line">  delay(<span class="number">1000</span>);<span class="comment">//延时1S</span></div><div class="line">}</div></pre></td></tr></table></figure>

<ul>
<li>上位机程序用VB.net编写，主要采用Serialport及ZedGraph进行编写。Serialport类用于控制串口端口文件资源，提供同步I/O和事件驱动I/O。以下列举一些常用的属性、方法及事件：<br>属性：BaudRates(串口数据传输波特率设置)，DataBits(每个字节的标准数据长度)<br>方法：GetPortNames(获取当前计算机的串口名称数组)，Open（打开一个新的串口连接）<br>事件：DataReceived（表示将处理SerialPort对象的数据接收事件的方法）<br>zedGraph是一个非常优秀的开源的作图控件。</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function">SerialInit</span>()<span class="comment">//主要进行串口的初始化，当按打开按钮时进行初始化</span></div><div class="line"><span class="function">zedGraphInit</span>()<span class="comment">//对画图的初始化，当窗口建立时完成初始化</span></div><div class="line"><span class="function">Sp_DataReceived</span>()<span class="comment">//串口数据接收事件的方法</span></div></pre></td></tr></table></figure>

]]></content>
    
    
      <category term="周志" scheme="http://wangang.github.io/tags/%E5%91%A8%E5%BF%97/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[第一周周志]]></title>
    <link href="http://wangang.github.io/2014/08/10/%E7%AC%AC%E4%B8%80%E5%91%A8%E5%91%A8%E5%BF%97/"/>
    <id>http://wangang.github.io/2014/08/10/第一周周志/</id>
    <published>2014-08-10T02:17:45.000Z</published>
    <updated>2014-08-10T03:20:25.000Z</updated>
    <content type="html"><![CDATA[<ul>
<li>本周工作主要是对C扫描系统外围接口电路进行改造创新。以前接口电路中只是对单片机引脚简单地外接，此次主要对接口重新规划以及将单片机与PC机的通讯模式从USB改为串口，以前USB模式调试时经常会导致软件卡死重启的现象本次采用串口将能更好的解决该问题。画电路主要采用eagle以及proteus联合使用。</li>
<li><a href="http://www.cadsoftusa.com/" target="_blank" rel="external">eagle</a>是开源软件，里面库文件比较丰富，所以此次采用eagle画原理图和PCB板。proteus用来仿真单片机与PC主机的通讯电路，通讯采用RS232，所需元件MAX3232 DB9等。通过仿真调整好整个电路，用eagle画出原理图做出PCB。eagle画原理图时，添加库文件、选择元器件以及封装、修改元器件及其封装、如何用正确的电气线连接元器件。eagle可以保持双向操作，若原理图改变时PCB同时改变这样操作特别方便。</li>
<li>原理图所需器件：<a href="http://www.arduino.cc/" target="_blank" rel="external">Arduino</a> shield、端子、MAX3232、电容、电阻，其中MAX3232、电阻、电容采用贴片封装。开始画原理图时，应该拿到所有元器件，用游标卡尺量取元件尺寸，选取正确的封装。大师兄为我们讲解了贴片封装以及焊接时注意事项：贴片封装SOP0603、0804，后面数字代表贴片.7K电阻导致分压，修改完成后，电机运动正常。安装，此次安装将电路板固定在亚克力上，再将整块固定在C扫描机架上。定位孔、开孔、攻丝，完成安装。</li>
<li>展望，希望将C扫描和激光雕刻合成统一。构思，两部分分开供电，通过自锁开关切换电源，以此完成两个系统切换功能。</li>
<li><a href="http://www.evaimg.org/" target="_blank" rel="external">项目地址</a></li>
</ul>
]]></content>
    
    
      <category term="周志" scheme="http://wangang.github.io/tags/%E5%91%A8%E5%BF%97/"/>
    
  </entry>
  
</feed>
